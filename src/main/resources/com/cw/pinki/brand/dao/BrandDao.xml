<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cw.pinki.brand.dao.BrandDao">
    <select id="findIfBrandNameExist" resultType="java.lang.Integer">
        select count(1)
        from brand
        where brand_name = #{brandName}
    </select>

    <select id="findIfDesignerAccountExist" resultType="java.lang.Integer">
        select count(1)
        from brand
        where designer_account = #{designerAccount}
    </select>

    <insert id="saveBrandInfo" keyProperty="brandNo" keyColumn="brand_no" useGeneratedKeys="true">
        INSERT INTO brand
        (brand_name,
         designer_account,
         designer_password,
         tax_id_no,
         brand_tel,
         brand_addr,
         bank_no,
         bank_account,
         brand_story,
         brand_logo,
         cover_pic,
         process_user)
        VALUES (#{brand.brandName},
                #{brand.designerAccount},
                #{brand.designerPassword},
                #{brand.taxIdNo},
                #{brand.brandTel},
                #{brand.brandAddr},
                #{brand.bankNo},
                #{brand.bankAccount},
                #{brand.brandStory},
                #{brand.brandLogo},
                #{brand.coverPic},
                #{brand.processUser});
    </insert>

    <select id="findPasswordByAccount">
        select designer_password
        from brand
        where designer_account = #{designerAccount}
    </select>

    <update id="updateAccountStatus">
        update brand
        set designer_status = #{brand.designerStatus},
            last_update_time=NOW(),
            process_user=#{brand.designerAccount}
        where designer_account=#{brand.designerAccount}
    </update>
</mapper>