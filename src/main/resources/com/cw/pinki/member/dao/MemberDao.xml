<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cw.pinki.member.dao.MemberDao">
	<select id="checkMailExists" resultType="java.lang.Integer">
		select count(1)
		from member
		where mail = #{mail}
	</select>

	<insert id="addAnMemberAccount" parameterType="com.cw.pinki.common.vo.Member"
			useGeneratedKeys="true" keyProperty="memberNo">
<!--		<selectKey keyProperty="member_no" keyColumn="member_no"-->
<!--			order="AFTER" resultType="java.lang.Integer">-->
<!--			select last_insert_id()-->
<!--		</selectKey>-->
		insert into member (
			name,
		<if test="member.birthday != null">
			birthday,
		</if>
			mail,
			member_password,
		<if test="member.subscription != null">
			subscription,
		</if>
		<if test="member.tel != null">
			tel,
		</if>
		<if test="member.address != null">
			address,
		</if>
			process_user)
		values (
			#{member.name},
		<if test="member.birthday != null">
			#{member.birthday},
		</if>
			#{member.mail},
			#{member.memberPassword},
		<if test="member.subscription != null">
			#{member.subscription},
		</if>
		<if test="member.tel != null">
			#{member.tel},
		</if>
		<if test="member.address != null">
			#{brand.address},
		</if>
			#{member.processUser});
	</insert>

	<select id="findMemberNoByMemberLoginInfoDto" resultType="java.lang.Integer">
		select member_no from member
		where mail = #{dto.mail}
		and member_password = #{dto.memberPassword}
	</select>
</mapper>